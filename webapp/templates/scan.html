<!doctype html>
<html>
<head>
    <script src="https://unpkg.com/html5-qrcode@2.2.1/html5-qrcode.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/static/img/Pickle_rick_transparent_edgetrimmed.webp">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/store.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</head>
<header class="bg-light">
  <ul class="nav nav-pills justify-content-center ">
    <li class="nav-item">
      <a class="nav-link" href="/storePage">Store Layout</a>
    </li>
    <li class="nav-item">
      <a class="nav-link  active" href="/scanPage">Barcode Scanner</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/cartFunction">Shopping cart</a>
     </li>
  </ul>
</header>
<body style="background-image: url(/static/img/background-store.jpg); background-repeat: no-repeat; background-size: cover;">
  
  
  <div id="qr-reader" class="bg-light" style="width: 60%; margin: auto; position: relative; padding: 0px; border: 1px solid silver;"><div style="text-align: left; margin: 0px; padding: 5px; font-size: 20px; border-bottom: 1px solid rgba(192, 192, 192, 0.18);"><span><a href="https://github.com/mebjas/html5-qrcode">Code Scanner</a></span><span id="qr-reader__status_span" style="float: right; padding: 5px 7px; font-size: 14px; background: rgb(238, 238, 255); border: 1px solid rgba(0, 0, 0, 0); color: rgb(17, 17, 17);">Idle</span><div id="qr-reader__header_message" style="display: none; font-size: 14px; padding: 2px 10px; margin-top: 4px; border-top: 1px solid rgb(246, 246, 246);"></div></div><div id="qr-reader__scan_region" style="width: 100%; min-height: 100px; text-align: center;"><br><img width="64" src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/assets/camera-scan.gif" style="opacity: 0.3;"></div><div id="qr-reader__dashboard" style="width: 100%;"><div id="qr-reader__dashboard_section" style="width: 100%; padding: 10px; text-align: left;"><div><div id="qr-reader__dashboard_section_csr" style="display: block;"><div style="text-align: center;"><button>Request Camera Permissions</button></div></div><div id="qr-reader__dashboard_section_fsr" style="text-align: center; display: none;"><input id="qr-reader__filescan_input" accept="image/*" type="file" disabled="" style="width: 200px;"><span>&nbsp; Select Image</span></div></div><div style="text-align: center;"><a id="qr-reader__dashboard_section_swaplink" href="#scan-using-file" style="text-decoration: underline;">Scan an Image File</a></div></div></div></div>


</body>  
    <script>
function onScanSuccess(decodedText, decodedResult) {
    console.log(`Code scanned = ${decodedText}`, decodedResult);
    const request = new XMLHttpRequest()
    alert("Scan Success : " + decodedText);
    request.open('POST',`/scanFunction/${JSON.stringify(decodedText)}`)
    request.send();
    
}
let config = {
  fps: 10,
  qrbox: {width: 350, height: 250},
  rememberLastUsedCamera: true,
  // Only support camera scan type.
  supportedScanTypes: [Html5QrcodeScanType.SCAN_TYPE_CAMERA]
};
var html5QrcodeScanner = new Html5QrcodeScanner(
    "qr-reader", config,false);
html5QrcodeScanner.render(onScanSuccess);
</script>
</html>